<%# Individual notification item %>
<%= link_to notification.url || "#",
    class: "dropdown-item d-flex align-items-start p-3 border-bottom notification-item #{'unread' unless notification.read_at?}",
    id: "notification-#{notification.id}",
    data: { 
      turbo: notification.url.present?,
      action: "click->notifications#markAsRead",
      notification_id: notification.id
    } do %>
  <div class="flex-grow-1">
    <div class="d-flex justify-content-between align-items-start mb-1">
      <p class="mb-0 small text-muted">
        <%= notification.message %>
      </p>
      <% unless notification.read_at? %>
        <span class="badge bg-primary rounded-pill ms-2">New</span>
      <% end %>
    </div>
    <small class="text-muted">
      <%= time_ago_in_words(notification.created_at) %> ago
    </small>
  </div>
<% end %>

