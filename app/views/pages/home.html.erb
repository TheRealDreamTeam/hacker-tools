<!-- Full-width layout with side banners -->
<div class="container-fluid px-0">
  <div class="row g-0">
    <!-- Left Ad Banner (columns 1-2) - positioned relative to main content -->
    <% used_images = [] %>
    <%= render "shared/side_banner", position: "left", used_images: used_images %>

    <!-- Main Content (columns 3-10) - adjusted for wider banners -->
    <div class="col-lg-8">
      <div class="container py-4">
  <!-- Hero section with heading and article cards -->
  <div class="row justify-content-center mb-4">
    <div class="col-12 col-lg-8">
      <div class="text-center mb-4">
        <p class="lead text-muted mb-3" data-controller="wave-text" data-wave-text-interval-value="60000" data-wave-text-wave-speed-value="0.8" data-wave-text-amplitude-value="15" data-wave-text-wave-duration-value="2000"><%= t("pages.home.hero.heading") %></p>
        <p class="text-muted mb-4 hero-subheading"><%= t("pages.home.hero.subheading") %></p>
      </div>
      
      <!-- Article cards -->
      <div class="row g-3 mb-4">
        <div class="col-12 col-md-4">
          <%= link_to newest_articles_path, class: "card shadow-sm text-decoration-none card-hover h-100 overflow-hidden article-card" do %>
            <div class="card-body d-flex align-items-center justify-content-center position-relative" style="min-height: 120px; background-image: url('https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=400&h=200&fit=crop'); background-size: cover; background-position: center;">
              <div class="position-absolute top-0 start-0 w-100 h-100" style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.8) 0%, rgba(118, 75, 162, 0.8) 100%);"></div>
              <h5 class="card-title mb-0 text-white position-relative z-1"><%= t("pages.home.hero.articles.newest") %></h5>
            </div>
          <% end %>
        </div>
        <div class="col-12 col-md-4">
          <%= link_to user_guide_path, class: "card shadow-sm text-decoration-none card-hover h-100 overflow-hidden article-card" do %>
            <div class="card-body d-flex align-items-center justify-content-center position-relative" style="min-height: 120px; background-image: url('https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=400&h=200&fit=crop'); background-size: cover; background-position: center;">
              <div class="position-absolute top-0 start-0 w-100 h-100" style="background: linear-gradient(135deg, rgba(240, 147, 251, 0.8) 0%, rgba(245, 87, 108, 0.8) 100%);"></div>
              <h5 class="card-title mb-0 text-black fw-bold position-relative z-1 text-center"><%= t("pages.home.hero.articles.user_guide") %></h5>
            </div>
          <% end %>
        </div>
        <div class="col-12 col-md-4">
          <%= link_to about_us_path, class: "card shadow-sm text-decoration-none card-hover h-100 overflow-hidden article-card" do %>
            <div class="card-body d-flex align-items-center justify-content-center position-relative" style="min-height: 120px; background-image: url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=400&h=200&fit=crop'); background-size: cover; background-position: center;">
              <div class="position-absolute top-0 start-0 w-100 h-100" style="background: linear-gradient(135deg, rgba(79, 172, 254, 0.8) 0%, rgba(0, 242, 254, 0.8) 100%);"></div>
              <h5 class="card-title mb-0 text-white fw-bold position-relative z-1"><%= t("pages.home.hero.articles.about_us") %></h5>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <!-- Hero search bar centered within 8-grid width on large screens -->
  <div class="row justify-content-center mb-4">
    <div class="col-12 col-lg-8">
      <div class="position-relative" style="overflow: visible;">
        <%= form_with url: search_path,
                      method: :get,
                      local: true,
                      role: "search",
                      data: { controller: "search-suggestions", "search-suggestions-url-value": search_suggestions_path },
                      class: "row g-2 align-items-center" do |form| %>
          <div class="col-12 col-md-9">
            <%= form.search_field :query,
                                  value: params[:query],
                                  id: "tool-search-input",
                                  class: "form-control form-control-lg",
                                  placeholder: t("pages.home.search_placeholder"),
                                  aria: { label: t("pages.home.search_placeholder") },
                                  autocomplete: "off",
                                  data: { "search-suggestions-target": "input", action: "input->search-suggestions#onInput blur->search-suggestions#hide" } %>
          </div>
          <div class="col-12 col-md-3 d-grid">
            <%= form.submit t("actions.search"), class: "btn btn-primary btn-lg" %>
          </div>
          <div id="home-search-suggestions" data-search-suggestions-target="panel"></div>
        <% end %>
      </div>
    </div>
  </div>

  <!-- Category tabs to switch between lists -->
  <div class="row justify-content-center mb-4">
    <div class="col-12 col-lg-8">
      <div class="btn-group w-100" role="group" aria-label="<%= t('pages.home.category_aria_label') %>" data-controller="home-tabs tooltip">
        <%= link_to root_path(category: "trending"),
                    class: "btn btn-outline-primary #{'active' if @category == 'trending'}",
                    id: "home-tab-trending",
                    data: {
                      "home-tabs-target": "tab",
                      "home-tabs-category-value": "trending",
                      "bs-toggle": "tooltip",
                      "bs-title": t('pages.home.categories.tooltips.trending'),
                      "bs-placement": "top"
                    },
                    aria: { pressed: @category == 'trending' } do %>
          <%= t("pages.home.categories.trending") %>
        <% end %>
        <%= link_to root_path(category: "new"),
                    class: "btn btn-outline-primary #{'active' if @category == 'new'}",
                    id: "home-tab-new",
                    data: {
                      "home-tabs-target": "tab",
                      "home-tabs-category-value": "new",
                      "bs-toggle": "tooltip",
                      "bs-title": t('pages.home.categories.tooltips.new_hot'),
                      "bs-placement": "top"
                    },
                    aria: { pressed: @category == 'new' } do %>
          <%= t("pages.home.categories.new_hot") %>
        <% end %>
        <%= link_to root_path(category: "upvoted"),
                    class: "btn btn-outline-primary #{'active' if @category == 'upvoted'}",
                    id: "home-tab-upvoted",
                    data: {
                      "home-tabs-target": "tab",
                      "home-tabs-category-value": "upvoted",
                      "bs-toggle": "tooltip",
                      "bs-title": t('pages.home.categories.tooltips.most_upvoted'),
                      "bs-placement": "top"
                    },
                    aria: { pressed: @category == 'upvoted' } do %>
          <%= t("pages.home.categories.most_upvoted") %>
        <% end %>
      </div>
    </div>
  </div>

  <!-- Single list container that gets replaced via Turbo Streams -->
  <div class="row g-3 justify-content-center">
    <div class="col-12 col-lg-10">
      <div class="card shadow-sm mb-3" id="home-items-list">
        <div class="card-body">
          <% items = case @category
                     when 'new' then @new_hot_items
                     when 'upvoted' then @most_upvoted_items
                     else @trending_items
                     end %>
          <% if items.blank? %>
            <p class="text-muted mb-0"><%= t("pages.home.list_placeholder") %></p>
          <% else %>
            <% items.each_with_index do |item, i| %>
              <%= render partial: "unified_card", locals: { item: item, index: i } %>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
      </div>
    </div>

    <!-- Right Ad Banner (columns 11-12) - extended inward toward main content -->
    <%= render "shared/side_banner", position: "right", used_images: used_images %>
  </div>
</div>

