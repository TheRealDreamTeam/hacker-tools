<%# Replace the single list container with the selected category's items %>
<% items = case @category
         when 'new' then @new_hot_items
         when 'upvoted' then @most_upvoted_items
         else @trending_items
         end %>

<%= turbo_stream.replace "home-items-list" do %>
  <div class="card shadow-sm mb-3" id="home-items-list">
    <div class="card-body">
      <% if items.blank? %>
        <p class="text-muted mb-0"><%= t("pages.home.list_placeholder") %></p>
      <% else %>
        <% items.each_with_index do |item, i| %>
          <%= render partial: "unified_card", locals: { item: item, index: i } %>
        <% end %>
      <% end %>
    </div>
  </div>
<% end %>

<%# Update tab active states %>
<%= turbo_stream.update "home-tab-trending" do %>
  <%= link_to root_path(category: "trending"),
              class: "btn btn-outline-primary #{'active' if @category == 'trending'}",
              data: {
                "home-tabs-target": "tab",
                "home-tabs-category-value": "trending",
                "bs-toggle": "tooltip",
                "bs-title": t('pages.home.categories.tooltips.trending'),
                "bs-placement": "top"
              },
              aria: { pressed: @category == 'trending' },
              id: "home-tab-trending" do %>
    <%= t("pages.home.categories.trending") %>
  <% end %>
<% end %>

<%= turbo_stream.update "home-tab-new" do %>
  <%= link_to root_path(category: "new"),
              class: "btn btn-outline-primary #{'active' if @category == 'new'}",
              data: {
                "home-tabs-target": "tab",
                "home-tabs-category-value": "new",
                "bs-toggle": "tooltip",
                "bs-title": t('pages.home.categories.tooltips.new_hot'),
                "bs-placement": "top"
              },
              aria: { pressed: @category == 'new' },
              id: "home-tab-new" do %>
    <%= t("pages.home.categories.new_hot") %>
  <% end %>
<% end %>

<%= turbo_stream.update "home-tab-upvoted" do %>
  <%= link_to root_path(category: "upvoted"),
              class: "btn btn-outline-primary #{'active' if @category == 'upvoted'}",
              data: {
                "home-tabs-target": "tab",
                "home-tabs-category-value": "upvoted",
                "bs-toggle": "tooltip",
                "bs-title": t('pages.home.categories.tooltips.most_upvoted'),
                "bs-placement": "top"
              },
              aria: { pressed: @category == 'upvoted' },
              id: "home-tab-upvoted" do %>
    <%= t("pages.home.categories.most_upvoted") %>
  <% end %>
<% end %>
