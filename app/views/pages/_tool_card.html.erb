<div class="card mb-3 position-relative card-hover">
  <div class="card-body">
    <div class="row align-items-center">
      <!-- Left content: star, title, description, tags -->
      <div class="col-12 col-md-5">
        <div class="d-flex justify-content-between align-items-start mb-1 position-relative">
          <h5 class="card-title mb-0">
            <%= link_to "#{index + 1}. #{tool.tool_name}", tool_path(tool), class: "text-decoration-none" %>
            <%# Tools are community-owned, no owner to display %>
          </h5>
          <%= render "tools/read_state", tool: tool, classes: "position-absolute top-0 end-0 mt-1 me-1" %>
        </div>
        <p class="card-text text-muted mb-2"><%= tool.tool_description.presence || t("pages.home.card.description", index: index + 1) %></p>
        <div class="d-flex flex-wrap gap-2">
          <% displayed_tags = tool.tags.limit(3) %>
          <% if displayed_tags.any? %>
            <% displayed_tags.each do |tag| %>
              <span class="badge bg-light text-primary border"><%= tag.tag_name %></span>
            <% end %>
          <% else %>
            <% [
              t("pages.home.card.sample_tag_one"),
              t("pages.home.card.sample_tag_two"),
              t("pages.home.card.sample_tag_three")
            ].each do |tag| %>
              <span class="badge bg-light text-primary border"><%= tag %></span>
            <% end %>
          <% end %>
        </div>
        <!-- Removed stretched-link to keep interaction buttons clickable without redirect -->
      </div>

      <!-- Right content: logo + upvotes aligned on the same row -->
      <div class="col-12 col-md-7 d-flex justify-content-md-end justify-content-start align-items-center gap-3 mt-3 mt-md-0">
        <div class="border rounded-circle bg-light d-inline-flex align-items-center justify-content-center flex-shrink-0" style="width: 64px; height: 64px;">
          <% if tool.icon.attached? %>
            <%= image_tag tool.icon, alt: tool.tool_name, class: "rounded-circle", style: "width: 64px; height: 64px; object-fit: cover;" %>
          <% else %>
            <span class="text-muted small"><%= t("pages.home.card.logo_placeholder") %></span>
          <% end %>
        </div>
        <%= render "tools/interaction_buttons", tool: tool %>
      </div>
    </div>
  </div>
</div>

