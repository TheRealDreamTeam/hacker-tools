<!-- Full-width layout with side banners -->
<div class="container-fluid px-0">
  <div class="row g-0">
    <!-- Left Ad Banner (columns 1-2) - extended inward toward main content -->
    <div class="col-lg-2 d-none d-lg-block side-banner ps-5 pe-5">
      <div class="card h-100 rounded-0 border-0 border-end position-relative overflow-hidden" style="border-radius: 0 !important; background-image: url('https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=300&h=800&fit=crop'); background-size: cover; background-position: center;">
        <div class="position-absolute top-0 start-0 w-100 h-100" style="background: linear-gradient(135deg, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0.4) 100%);"></div>
        <div class="card-body d-flex flex-column align-items-center justify-content-center text-center p-3 position-relative z-1">
          <p class="fw-semibold mb-1 text-white">Sponsors</p>
          <p class="text-white-50 small mb-0"><%= t("pages.home.ads.supporting_text") %></p>
        </div>
      </div>
    </div>

    <!-- Main Content (columns 3-10) - adjusted for wider banners -->
    <div class="col-12 col-lg-8">
      <div class="container py-4">
<div class="devise-container account-settings-container">
  <h2 class="border-bottom pb-3"><%= t("account_settings.title") %></h2>

  <!-- Flash messages container for Turbo Stream updates -->
  <div id="flash-messages"></div>

  <!-- Two column layout on desktop, single column on mobile -->
  <div class="row g-3 pt-3">
    <!-- Left Column: Profile Information -->
      <!-- Section 1: Avatar Update -->
      <div class="col-12 col-md-6 ">
        <%= render partial: "account_settings/avatar_section", locals: { user: @user }%>
      </div>

      <!-- Section 2: Bio Update -->
      <div class="col-12 col-md-6">
        <%= render partial: "account_settings/bio_section", locals: { user: @user }%>
      </div>

    <!-- Right Column: Account Security -->
      <!-- Section 3: Username and Email Update -->
      <div class="col-12 col-md-6">
        <%= render partial: "account_settings/username_email_section", locals: { user: @user }%>
      </div>

      <!-- Section 4: Password Update -->
      <div class="col-12 col-md-6">
        <%= render partial: "account_settings/password_section", locals: { user: @user }%>
      </div>

      <!-- Section 5: Account Deletion -->
      <div class="account-section col-12 col-md-6 h-100 d-flex flex-column" id="delete-section">
        <h3 class="h5 mb-3 ps-1"><%= t("account_settings.destroy.title") %></h3>
        <div class="card border-danger h-100 d-flex flex-column">
          <div class="card-body d-flex flex-column flex-grow-1">
            <p class="text-danger mb-3"><%= t("account_settings.destroy.warning") %></p>
            <button type="button" class="btn btn-outline-danger w-100" data-bs-toggle="modal" data-bs-target="#delete-account-modal">
              <%= t("account_settings.destroy.button") %>
            </button>
          </div>
        </div>
      </div>
  </div>
</div>

<%# Confirmation Modal for Avatar Deletion %>
<%= render "shared/confirmation_modal",
    id: "delete-avatar-modal",
    title: t("account_settings.avatar.delete_modal_title"),
    message: t("account_settings.avatar.delete_modal_message"),
    confirm_text: t("account_settings.avatar.delete_confirm_button"),
    confirm_class: "btn-primary",
    form_action: delete_avatar_account_settings_path,
    form_method: :delete %>

<%# Confirmation Modal for Account Deletion %>
<div class="modal fade" id="delete-account-modal" tabindex="-1" aria-labelledby="delete-account-modal-label" aria-hidden="true" data-controller="delete-account-modal">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content" id="delete-account-modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="delete-account-modal-label"><%= t("account_settings.destroy.modal_title") %></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="<%= t("navigation.close") %>"></button>
      </div>
      <%= form_with model: @user, url: account_settings_path, method: :delete, data: { turbo: false }, local: true do |f| %>
        <div class="modal-body" id="delete-account-modal-body">
          <p><%= t("account_settings.destroy.modal_message") %></p>
          <div class="mt-3">
            <%= f.label :password, t("account_settings.destroy.password_label"), class: "form-label" %>
            <%= f.password_field :password, id: "delete-account-password", class: "form-control #{'is-invalid' if @user.errors[:delete_account_password].any?}", placeholder: t("account_settings.destroy.password_placeholder"), required: true, autocomplete: "current-password" %>
            <% if @user.errors[:delete_account_password].any? %>
              <div class="invalid-feedback">
                <% @user.errors[:delete_account_password].each do |error| %>
                  <div><%= error %></div>
                <% end %>
              </div>
            <% end %>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><%= t("actions.cancel") %></button>
          <%= f.submit t("account_settings.destroy.confirm_button"), class: "btn btn-outline-danger" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
      </div>
    </div>

    <!-- Right Ad Banner (columns 11-12) - extended inward toward main content -->
    <div class="col-lg-2 d-none d-lg-block side-banner ps-5 pe-5">
      <div class="card h-100 rounded-0 border-0 border-start position-relative overflow-hidden" style="border-radius: 0 !important; background-image: url('https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=300&h=800&fit=crop'); background-size: cover; background-position: center;">
        <div class="position-absolute top-0 start-0 w-100 h-100" style="background: linear-gradient(135deg, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0.4) 100%);"></div>
        <div class="card-body d-flex flex-column align-items-center justify-content-center text-center p-3 position-relative z-1">
          <p class="fw-semibold mb-1 text-white">Sponsors</p>
          <p class="text-white-50 small mb-0"><%= t("pages.home.ads.supporting_text") %></p>
        </div>
      </div>
    </div>
  </div>
</div>

