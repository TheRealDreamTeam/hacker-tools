<% state_follow = current_user&.follows&.exists?(followable: submission) %>

<div id="<%= dom_id(submission, 'interactions') %>" class="interaction-buttons d-flex align-items-start gap-3 flex-wrap">
  <div class="interaction-item d-flex flex-column align-items-center gap-1">
    <%= button_to follow_submission_path(submission),
                  method: :post,
                  class: "btn btn-sm btn-outline-secondary interaction-btn",
                  title: t("submissions.actions.follow"),
                  aria: { label: t("submissions.actions.follow") } do %>
      <i class="bi <%= state_follow ? 'bi-bell-fill' : 'bi-bell' %> <%= state_follow ? 'text-secondary' : 'text-secondary' %>"></i>
    <% end %>
    <span class="interaction-count" title="<%= t('submissions.actions.follow') %>" aria-label="<%= t('submissions.actions.follow') %>">
      <%= submission.follower_count %>
    </span>
  </div>

  <% if user_signed_in? && current_user.lists.any? %>
    <div class="interaction-item d-flex flex-column align-items-center gap-1">
      <button type="button" 
              class="btn btn-outline-secondary btn-sm" 
              data-controller="add-to-list-button"
              data-action="click->add-to-list-button#open"
              data-add-to-list-button-submission-id-value="<%= submission.id %>"
              data-add-to-list-button-submission-name-value="<%= submission.submission_name %>"
              data-add-to-list-button-lists-value="<%= current_user.lists.map { |l| { id: l.id, name: l.list_name, has_submission: l.submissions.include?(submission) } }.to_json %>">
        <i class="bi bi-list-ul"></i>
      </button>
      <span class="interaction-count">
        <%= submission.lists.where(user: current_user).count %>
      </span>
    </div>
  <% end %>
</div>

