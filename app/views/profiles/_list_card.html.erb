<%# List card partial for profile page %>
<%# Displays a list with name, tool count, creation date, and follow button %>
<div class="list-group-item">
  <div class="d-flex justify-content-between align-items-start">
    <div class="flex-grow-1">
      <h5 class="mb-1">
        <%= link_to list.list_name, list_path(list), class: "text-decoration-none" %>
      </h5>
      <small class="text-muted">
        <%= l(list.created_at, format: :short) %>
        • <%= t("profiles.show.tabs.tools_count", count: list.tools.count) %>
        <% unless user_signed_in? && list.user == current_user && @user == current_user %>
          • <%= t("profiles.show.tabs.by_user", username: link_to(list.user.username, profile_path(list.user.username), class: "text-decoration-none")).html_safe %>
        <% end %>
        <span id="<%= dom_id(list, 'follow') %>-count">
          <% if list.follower_count > 0 %>
            • <%= t("profiles.show.followers") %>: <%= list.follower_count %>
          <% end %>
        </span>
      </small>
    </div>
    <%# Follow button container - stable wrapper for Turbo Stream updates %>
    <% if user_signed_in? && current_user != list.user %>
      <div id="<%= dom_id(list, 'follow') %>" class="follow-button-container ms-3">
        <% if @followed_list_ids.include?(list.id) %>
          <%= button_to unfollow_list_path(list),
              method: :delete,
              class: "btn btn-outline-secondary btn-sm",
              data: { turbo: true } do %>
            <%= t("lists.follow.unfollow") %>
          <% end %>
        <% else %>
          <%= button_to follow_list_path(list),
              method: :post,
              class: "btn btn-primary btn-sm",
              data: { turbo: true } do %>
            <%= t("lists.follow.follow") %>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>

